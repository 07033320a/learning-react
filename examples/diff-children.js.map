{"version":3,"sources":["webpack:///./examples/diff-children.js","webpack:///./~/normalize.css/normalize.css"],"names":[],"mappings":"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","file":"diff-children.js","sourcesContent":["import 'normalize.css';\n\nvar content = document.getElementById('__react-content');\n\ncontent.innerHTML = `\n<h2>diff children demo</h2>\n<div>\n<button id=\"action\">change</button>\n</div>\n<div id=\"result\"></div>\n`;\n\nvar result = document.getElementById('result');\n\nvar tmp = document.createElement('div');\n\nfunction getNode(html) {\n  tmp.innerHTML = html;\n  return tmp.firstChild;\n}\n\nfunction removeNode(node) {\n  node.parentNode.removeChild(node);\n}\n\nfunction insertAtIndex(parent, child, index) {\n  var after = parent.childNodes[index] || null;\n  parent.insertBefore(child, after);\n}\n\nvar node7 = {\n  key: '.7',\n  tag: 'div',\n  _mountIndex: 0,\n};\n\nvar node6 = {\n  key: '.6',\n  tag: 'div',\n  _mountIndex: 1,\n};\n\nvar node8 = {\n  key: '.8',\n  tag: 'div',\n  _mountIndex: 2,\n};\n\nvar node9 = {\n  key: '.9',\n  tag: 'div',\n  _mountIndex: 3,\n};\n\n\nvar prevChildren = {\n  [node7.key]: node7,\n  [node6.key]: node6,\n  [node8.key]: node8,\n  [node9.key]: node9,\n};\n\nvar nodes = Object.keys(prevChildren).map((k) => {\n  var node = prevChildren[k];\n  return `<${node.tag}>${node.key} - ${node.tag}</${node.tag}>`;\n});\n\nresult.innerHTML = nodes.join('');\n\nvar prevDOMChildNodes = result.childNodes;\n\nnode7.dom = prevDOMChildNodes[0];\nnode6.dom = prevDOMChildNodes[1];\nnode8.dom = prevDOMChildNodes[2];\nnode9.dom = prevDOMChildNodes[3];\n\nvar newNode8 = {\n  key: '.8',\n  tag: 'p',\n};\n\nnewNode8.dom = getNode(`<${newNode8.tag}>${newNode8.key} - ${newNode8.tag}</${newNode8.tag}>`);\n\nvar newNodeX = {\n  key: '.x',\n  tag: 'div',\n};\n\nnewNodeX.dom = getNode(`<${newNodeX.tag}>${newNodeX.key} - ${newNodeX.tag}</${newNodeX.tag}>`);\n\nvar nextChildren = {\n  [node9.key]: node9,\n  [node7.key]: node7,\n  [newNode8.key]: newNode8,\n  [newNodeX.key]: newNodeX,\n};\n\ndocument.getElementById('action').onclick = function () {\n  document.getElementById('action').disabled = true;\n\n  var lastIndex = 0;\n  var nextIndex = 0;\n  var queue = [];\n  for (var name in nextChildren) {\n    if (!nextChildren.hasOwnProperty(name)) {\n      continue;\n    }\n    var prevChild = prevChildren && prevChildren[name];\n    var nextChild = nextChildren[name];\n    if (prevChild === nextChild) {\n      if (prevChild._mountIndex < lastIndex) {\n        queue.push({\n          type: 'move',\n          child: prevChild,\n          toIndex: nextIndex,\n        });\n      }\n      lastIndex = Math.max(prevChild._mountIndex, lastIndex);\n      prevChild._mountIndex = nextIndex;\n    } else {\n      if (prevChild) {\n        // Update `lastIndex` before `_mountIndex` gets unset by unmounting.\n        lastIndex = Math.max(prevChild._mountIndex, lastIndex);\n        queue.push({\n          type: 'remove',\n          child: prevChild,\n        });\n      }\n      queue.push({\n        type: 'new',\n        child: nextChild,\n        toIndex: nextIndex,\n      });\n    }\n    nextIndex++;\n  }\n// Remove children that are no longer present.\n  for (const childName in prevChildren) {\n    if (prevChildren.hasOwnProperty(childName) &&\n      !(nextChildren && nextChildren.hasOwnProperty(childName))) {\n      queue.push({\n        type: 'remove',\n        child: prevChildren[childName],\n      });\n    }\n  }\n\n  queue.forEach((q) => {\n    if (q.type === 'remove' || q.type === 'move') {\n      removeNode(q.child.dom);\n\n      if (q.type === 'remove') {\n        console.log('remove', q.child);\n      }\n    }\n  });\n\n  queue.forEach((q) => {\n    if (q.type === 'new' || q.type === 'move') {\n      insertAtIndex(result, q.child.dom, q.toIndex);\n      console.log(q.type, q.child, 'to', q.toIndex);\n    }\n  });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./examples/diff-children.js\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/normalize.css/normalize.css\n ** module id = 171\n ** module chunks = 1 2 3 6 7 8 10\n **/"],"sourceRoot":""}