{"version":3,"sources":["webpack:///./examples/diff-children.js"],"names":[],"mappings":"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","file":"diff-children.js","sourcesContent":["var content = document.getElementById('__react-content');\n\ncontent.innerHTML = `\n<h2>diff children demo</h2>\n<div>\n<button id=\"action\">change</button>\n</div>\n<div id=\"result\"></div>\n`;\n\nvar result = document.getElementById('result');\n\nvar tmp = document.createElement('div');\n\nfunction getNode(html) {\n  tmp.innerHTML = html;\n  return tmp.firstChild;\n}\n\nfunction removeNode(node) {\n  node.parentNode.removeChild(node);\n}\n\nfunction insertAtIndex(parent, child, index) {\n  var after = parent.childNodes[index] || null;\n  parent.insertBefore(child, after);\n}\n\nvar node7 = {\n  key: '.7',\n  tag: 'div',\n  _mountIndex: 0,\n};\n\nvar node6 = {\n  key: '.6',\n  tag: 'div',\n  _mountIndex: 1,\n};\n\nvar node8 = {\n  key: '.8',\n  tag: 'div',\n  _mountIndex: 2,\n};\n\nvar node9 = {\n  key: '.9',\n  tag: 'div',\n  _mountIndex: 3,\n};\n\n\nvar prevChildren = {\n  [node7.key]: node7,\n  [node6.key]: node6,\n  [node8.key]: node8,\n  [node9.key]: node9\n};\n\nvar nodes = Object.keys(prevChildren).map(function (k) {\n  var node = prevChildren[k];\n  return `<${node.tag}>${node.key} - ${node.tag}</${node.tag}>`;\n});\n\nresult.innerHTML = nodes.join('');\n\nvar prevDOMChildNodes = result.childNodes;\n\nnode7.dom = prevDOMChildNodes[0];\nnode6.dom = prevDOMChildNodes[1];\nnode8.dom = prevDOMChildNodes[2];\nnode9.dom = prevDOMChildNodes[3];\n\nvar newNode8 = {\n  key: '.8',\n  tag: 'p'\n};\n\nnewNode8.dom = getNode(`<${newNode8.tag}>${newNode8.key} - ${newNode8.tag}</${newNode8.tag}>`);\n\nvar newNodeX = {\n  key: '.x',\n  tag: 'div'\n};\n\nnewNodeX.dom = getNode(`<${newNodeX.tag}>${newNodeX.key} - ${newNodeX.tag}</${newNodeX.tag}>`);\n\nvar nextChildren = {\n  [node9.key]: node9,\n  [node7.key]: node7,\n  [newNode8.key]: newNode8,\n  [newNodeX.key]: newNodeX\n};\n\ndocument.getElementById('action').onclick = function () {\n  document.getElementById('action').disabled = true;\n\n  var lastIndex = 0;\n  var nextIndex = 0;\n  var queue = [];\n  for (var name in nextChildren) {\n    if (!nextChildren.hasOwnProperty(name)) {\n      continue;\n    }\n    var prevChild = prevChildren && prevChildren[name];\n    var nextChild = nextChildren[name];\n    if (prevChild === nextChild) {\n      if (prevChild._mountIndex < lastIndex) {\n        queue.push({\n          type: 'move',\n          child: prevChild,\n          toIndex: nextIndex\n        });\n      }\n      lastIndex = Math.max(prevChild._mountIndex, lastIndex);\n      prevChild._mountIndex = nextIndex;\n    } else {\n      if (prevChild) {\n        // Update `lastIndex` before `_mountIndex` gets unset by unmounting.\n        lastIndex = Math.max(prevChild._mountIndex, lastIndex);\n        queue.push({\n          type: 'remove',\n          child: prevChild\n        });\n      }\n      queue.push({\n        type: 'new',\n        child: nextChild,\n        toIndex: nextIndex\n      });\n    }\n    nextIndex++;\n  }\n// Remove children that are no longer present.\n  for (name in prevChildren) {\n    if (prevChildren.hasOwnProperty(name) && !(nextChildren && nextChildren.hasOwnProperty(name))) {\n      queue.push({\n        type: 'remove',\n        child: prevChildren[name]\n      });\n    }\n  }\n\n  queue.forEach(function (q) {\n    if (q.type === 'remove' || q.type === 'move') {\n      removeNode(q.child.dom);\n\n      if (q.type === 'remove') {\n        console.log('remove', q.child);\n      }\n    }\n  });\n\n  queue.forEach(function (q) {\n    if (q.type === 'new' || q.type === 'move') {\n      insertAtIndex(result, q.child.dom, q.toIndex);\n      console.log(q.type, q.child, 'to', q.toIndex);\n    }\n  });\n\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./examples/diff-children.js\n **/"],"sourceRoot":""}